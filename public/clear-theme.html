<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clear Theme Data</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background: #1a1f2e;
      color: #e0e0e0;
    }
    button {
      background: #17a2b8;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px 5px;
    }
    button:hover {
      background: #138496;
    }
    .danger {
      background: #ef4444;
    }
    .danger:hover {
      background: #dc2626;
    }
    pre {
      background: #0a0e1a;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
    }
    .success {
      background: #22c55e;
      padding: 10px;
      border-radius: 6px;
      margin: 10px 0;
      display: none;
    }
  </style>
</head>
<body>
  <h1>üîß Theme System Diagnostics</h1>
  
  <h2>Current LocalStorage</h2>
  <pre id="storage-content"></pre>
  
  <h2>Actions</h2>
  <button onclick="clearAll()">Clear All Theme Data</button>
  <button onclick="clearCustomColors()">Clear Custom Colors Only</button>
  <button onclick="setDark()">Set Dark Theme</button>
  <button onclick="setLight()">Set Light Theme</button>
  <button class="danger" onclick="clearEverything()">Clear ALL LocalStorage</button>
  
  <div class="success" id="success-msg"></div>
  
  <h2>Test Theme</h2>
  <p>Background should change below:</p>
  <div id="test-box" style="padding: 20px; border: 2px solid #17a2b8; border-radius: 6px; margin: 10px 0;">
    <p style="color: var(--text-primary, red);">Text Primary Color</p>
    <p style="color: var(--text-secondary, red);">Text Secondary Color</p>
    <p>Background: <span id="bg-color">--bg-primary</span></p>
  </div>
  
  <a href="/" style="color: #17a2b8;">‚Üê Back to Home</a>

  <script>
    function showStorage() {
      const storageData = {};
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('gridtv-')) {
          storageData[key] = localStorage.getItem(key);
        }
      }
      document.getElementById('storage-content').textContent = JSON.stringify(storageData, null, 2);
    }
    
    function showSuccess(msg) {
      const successEl = document.getElementById('success-msg');
      successEl.textContent = '‚úÖ ' + msg;
      successEl.style.display = 'block';
      setTimeout(() => {
        successEl.style.display = 'none';
      }, 3000);
    }
    
    function clearAll() {
      localStorage.removeItem('gridtv-theme');
      localStorage.removeItem('gridtv-custom-colors');
      localStorage.removeItem('gridtv-custom-colors-theme');
      showStorage();
      showSuccess('Cleared all theme data');
    }
    
    function clearCustomColors() {
      localStorage.removeItem('gridtv-custom-colors');
      localStorage.removeItem('gridtv-custom-colors-theme');
      showStorage();
      showSuccess('Cleared custom colors');
    }
    
    function setDark() {
      localStorage.setItem('gridtv-theme', 'default');
      document.body.setAttribute('data-theme', 'default');
      updateTestBox();
      showStorage();
      showSuccess('Set to Dark theme');
    }
    
    function setLight() {
      localStorage.setItem('gridtv-theme', 'apple');
      document.body.setAttribute('data-theme', 'apple');
      updateTestBox();
      showStorage();
      showSuccess('Set to Light theme');
    }
    
    function clearEverything() {
      if (confirm('This will clear ALL localStorage data. Continue?')) {
        localStorage.clear();
        showStorage();
        showSuccess('Cleared ALL localStorage');
      }
    }
    
    function updateTestBox() {
      const box = document.getElementById('test-box');
      const computedStyle = getComputedStyle(document.documentElement);
      const bgPrimary = computedStyle.getPropertyValue('--bg-primary');
      document.getElementById('bg-color').textContent = bgPrimary || 'NOT DEFINED';
      box.style.background = 'var(--bg-primary, #ff0000)';
    }
    
    // Initialize
    showStorage();
    updateTestBox();
  </script>
  
  <link rel="stylesheet" href="/styles/themes.css">
</body>
</html>
