<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GridTV Scoreboard Demo</title>
    <link rel="icon" type="image/png" href="/assets/logo.png">

    <!-- Scoreboard CSS -->
    <link rel="stylesheet" href="/styles/scoreboard/scoreboard-variables.css">
    <link rel="stylesheet" href="/styles/scoreboard/scoreboard-base.css">
    <link rel="stylesheet" href="/styles/scoreboard/scoreboard-football.css">
    <link rel="stylesheet" href="/styles/scoreboard/scoreboard-basketball.css">
    <link rel="stylesheet" href="/styles/scoreboard/scoreboard-baseball.css">
    <link rel="stylesheet" href="/styles/scoreboard/scoreboard-hockey.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: #0f1118;
            color: #fff;
            min-height: 100vh;
            padding: 24px;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .demo-header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .demo-header p {
            color: rgba(255, 255, 255, 0.6);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }

        .controls button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            background: #1a1e28;
            color: #fff;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .controls button:hover {
            background: #252a36;
        }

        .controls button.active {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }

        .demo-section {
            margin-bottom: 48px;
        }

        .demo-section h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .demo-section h2 .badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            font-weight: 500;
        }

        .scoreboard-grid {
            display: grid;
            gap: 16px;
        }

        .scoreboard-grid--single {
            max-width: 600px;
        }

        /* Fullscreen variant needs more width */
        .scoreboard-grid--single:has(.scoreboard--fullscreen) {
            max-width: 900px;
        }

        .scoreboard-grid--dual {
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        }

        .scoreboard-grid--multi {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .scoreboard-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 12px;
        }

        .scoreboard-label {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        /* Variant selector */
        .variant-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 24px;
            background: rgba(0, 0, 0, 0.3);
            padding: 4px;
            border-radius: 8px;
            width: fit-content;
        }

        .variant-tab {
            padding: 8px 16px;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .variant-tab:hover {
            color: #fff;
        }

        .variant-tab.active {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 16px;
            }

            .scoreboard-grid--dual,
            .scoreboard-grid--multi {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>GridTV Scoreboard System</h1>
        <p>Centralized, modular scoreboard components for all sports</p>
    </div>

    <div class="variant-tabs">
        <button class="variant-tab active" data-variant="regular">Regular</button>
        <button class="variant-tab" data-variant="compact">Compact</button>
        <button class="variant-tab" data-variant="fullscreen">Fullscreen</button>
    </div>

    <div class="controls">
        <button id="btn-animate">Trigger Score Animation</button>
        <button id="btn-toggle-live">Toggle Live State</button>
        <button id="btn-random-scores">Random Scores</button>
    </div>

    <!-- NFL Section -->
    <div class="demo-section">
        <h2>NFL <span class="badge">FootballScoreboard</span></h2>
        <div class="scoreboard-grid scoreboard-grid--single">
            <div class="scoreboard-container">
                <div class="scoreboard-label">Live Game - 3rd Quarter</div>
                <div id="nfl-live"></div>
            </div>
        </div>
        <div class="scoreboard-grid scoreboard-grid--single" style="margin-top: 16px;">
            <div class="scoreboard-container">
                <div class="scoreboard-label">Final</div>
                <div id="nfl-final"></div>
            </div>
        </div>
    </div>

    <!-- NCAA Football Section -->
    <div class="demo-section">
        <h2>NCAA Football <span class="badge">FootballScoreboard</span></h2>
        <div class="scoreboard-grid scoreboard-grid--single">
            <div class="scoreboard-container">
                <div class="scoreboard-label">Live Game</div>
                <div id="ncaa-live"></div>
            </div>
        </div>
    </div>

    <!-- NBA Section -->
    <div class="demo-section">
        <h2>NBA <span class="badge">BasketballScoreboard</span></h2>
        <div class="scoreboard-grid scoreboard-grid--dual">
            <div class="scoreboard-container">
                <div class="scoreboard-label">Live - 4th Quarter</div>
                <div id="nba-live"></div>
            </div>
            <div class="scoreboard-container">
                <div class="scoreboard-label">Overtime</div>
                <div id="nba-ot"></div>
            </div>
        </div>
    </div>

    <!-- NHL Section -->
    <div class="demo-section">
        <h2>NHL <span class="badge">HockeyScoreboard</span></h2>
        <div class="scoreboard-grid scoreboard-grid--dual">
            <div class="scoreboard-container">
                <div class="scoreboard-label">Power Play</div>
                <div id="nhl-live"></div>
            </div>
            <div class="scoreboard-container">
                <div class="scoreboard-label">Final - Shootout</div>
                <div id="nhl-final"></div>
            </div>
        </div>
    </div>

    <!-- MLB Section -->
    <div class="demo-section">
        <h2>MLB <span class="badge">BaseballScoreboard</span></h2>
        <div class="scoreboard-grid scoreboard-grid--single">
            <div class="scoreboard-container">
                <div class="scoreboard-label">Bottom 7th - Runners On</div>
                <div id="mlb-live"></div>
            </div>
        </div>
    </div>

    <!-- Multi-Grid Demo -->
    <div class="demo-section">
        <h2>Multi-Game Grid <span class="badge">Compact Variant</span></h2>
        <div class="scoreboard-grid scoreboard-grid--multi" id="multi-grid">
            <!-- Dynamically populated -->
        </div>
    </div>

    <script type="module">
        import { createScoreboard } from '/scripts/scoreboard/index.js';

        // Store all scoreboard instances
        const scoreboards = {};
        let currentVariant = 'regular';

        // Sample game data
        const mockGames = {
            nflLive: {
                id: 'nfl-1',
                league: 'nfl',
                state: 'in',
                away: { abbr: 'KC', name: 'Chiefs', score: 21, record: '12-5', timeouts: 2 },
                home: { abbr: 'BUF', name: 'Bills', score: 17, record: '11-6', timeouts: 3 },
                possession: 'KC',
                situation: {
                    down: 2,
                    distance: 7,
                    yardLine: 35,
                    possessionText: 'BUF 35'
                },
                status: {
                    period: 3,
                    displayClock: '8:42'
                }
            },
            nflFinal: {
                id: 'nfl-2',
                league: 'nfl',
                state: 'post',
                away: { abbr: 'SF', name: '49ers', score: 27, record: '13-4', winner: false },
                home: { abbr: 'PHI', name: 'Eagles', score: 31, record: '14-3', winner: true },
                status: {
                    shortDetail: 'Final'
                }
            },
            ncaaLive: {
                id: 'ncaa-1',
                league: 'ncaa',
                state: 'in',
                away: { abbr: 'OSU', name: 'Ohio State', score: 28, timeouts: 1, logo: 'https://a.espncdn.com/i/teamlogos/ncaa/500/194.png' },
                home: { abbr: 'MICH', name: 'Michigan', score: 24, timeouts: 2, logo: 'https://a.espncdn.com/i/teamlogos/ncaa/500/130.png' },
                possession: 'OSU',
                situation: {
                    down: 2,
                    distance: 8,
                    yardLine: 35,
                    possessionText: 'MICH 35'
                },
                status: {
                    period: 4,
                    displayClock: '2:15'
                }
            },
            nbaLive: {
                id: 'nba-1',
                league: 'nba',
                state: 'in',
                away: { abbr: 'LAL', name: 'Lakers', score: 98, fouls: 4, timeouts: 3 },
                home: { abbr: 'BOS', name: 'Celtics', score: 102, fouls: 6, timeouts: 4 },
                linescores: {
                    away: [24, 28, 22, 24],
                    home: [26, 25, 28, 23]
                },
                status: {
                    period: 4,
                    displayClock: '4:32'
                }
            },
            nbaOT: {
                id: 'nba-2',
                league: 'nba',
                state: 'in',
                away: { abbr: 'GSW', name: 'Warriors', score: 118 },
                home: { abbr: 'PHX', name: 'Suns', score: 115 },
                linescores: {
                    away: [28, 30, 25, 25, 10],
                    home: [32, 22, 28, 26, 7]
                },
                status: {
                    period: 5,
                    displayClock: '1:45'
                }
            },
            nhlLive: {
                id: 'nhl-1',
                league: 'nhl',
                state: 'in',
                away: { abbr: 'COL', name: 'Avalanche', score: 3, shots: 28 },
                home: { abbr: 'VGK', name: 'Golden Knights', score: 2, shots: 24 },
                linescores: {
                    away: [1, 1, 1],
                    home: [0, 2, 0]
                },
                situation: {
                    strength: '5v4',
                    powerPlayTime: '1:23',
                    powerPlay: 'away'
                },
                status: {
                    period: 3,
                    displayClock: '12:08'
                }
            },
            nhlFinal: {
                id: 'nhl-2',
                league: 'nhl',
                state: 'post',
                away: { abbr: 'TOR', name: 'Maple Leafs', score: 3, winner: true },
                home: { abbr: 'MTL', name: 'Canadiens', score: 2, winner: false },
                linescores: {
                    away: [1, 1, 0, 0, 1],
                    home: [0, 2, 0, 0, 0]
                },
                status: {
                    period: 5,
                    shortDetail: 'Final/SO'
                }
            },
            mlbLive: {
                id: 'mlb-1',
                league: 'mlb',
                state: 'in',
                away: { abbr: 'NYY', name: 'Yankees', score: 4, hits: 8, errors: 0 },
                home: { abbr: 'BOS', name: 'Red Sox', score: 3, hits: 6, errors: 1 },
                linescores: {
                    away: [0, 1, 0, 2, 0, 1, 0],
                    home: [1, 0, 0, 0, 2, 0, 0]
                },
                situation: {
                    inning: 7,
                    half: 'bottom',
                    balls: 2,
                    strikes: 1,
                    outs: 1,
                    first: true,
                    second: false,
                    third: true
                },
                status: {
                    period: 7
                }
            }
        };

        // Initialize all scoreboards
        function initScoreboards() {
            // Clear existing
            Object.values(scoreboards).forEach(sb => sb.destroy());

            // NFL
            scoreboards.nflLive = createScoreboard(document.getElementById('nfl-live'), {
                league: 'nfl',
                variant: currentVariant
            });
            scoreboards.nflLive.update(mockGames.nflLive);

            scoreboards.nflFinal = createScoreboard(document.getElementById('nfl-final'), {
                league: 'nfl',
                variant: currentVariant
            });
            scoreboards.nflFinal.update(mockGames.nflFinal);

            // NCAA
            scoreboards.ncaaLive = createScoreboard(document.getElementById('ncaa-live'), {
                league: 'ncaa',
                variant: currentVariant
            });
            scoreboards.ncaaLive.update(mockGames.ncaaLive);

            // NBA
            scoreboards.nbaLive = createScoreboard(document.getElementById('nba-live'), {
                league: 'nba',
                variant: currentVariant
            });
            scoreboards.nbaLive.update(mockGames.nbaLive);

            scoreboards.nbaOT = createScoreboard(document.getElementById('nba-ot'), {
                league: 'nba',
                variant: currentVariant
            });
            scoreboards.nbaOT.update(mockGames.nbaOT);

            // NHL
            scoreboards.nhlLive = createScoreboard(document.getElementById('nhl-live'), {
                league: 'nhl',
                variant: currentVariant
            });
            scoreboards.nhlLive.update(mockGames.nhlLive);

            scoreboards.nhlFinal = createScoreboard(document.getElementById('nhl-final'), {
                league: 'nhl',
                variant: currentVariant
            });
            scoreboards.nhlFinal.update(mockGames.nhlFinal);

            // MLB
            scoreboards.mlbLive = createScoreboard(document.getElementById('mlb-live'), {
                league: 'mlb',
                variant: currentVariant
            });
            scoreboards.mlbLive.update(mockGames.mlbLive);

            // Multi-grid (always compact)
            initMultiGrid();
        }

        // Initialize multi-game grid
        function initMultiGrid() {
            const container = document.getElementById('multi-grid');
            container.innerHTML = '';

            const multiGames = [
                { ...mockGames.nflLive, id: 'multi-1' },
                { ...mockGames.nbaLive, id: 'multi-2' },
                { ...mockGames.nhlLive, id: 'multi-3' },
                { ...mockGames.mlbLive, id: 'multi-4' }
            ];

            multiGames.forEach(game => {
                const wrapper = document.createElement('div');
                wrapper.className = 'scoreboard-container';
                wrapper.innerHTML = `<div class="scoreboard-label">${game.league.toUpperCase()}</div><div id="${game.id}"></div>`;
                container.appendChild(wrapper);

                const sb = createScoreboard(document.getElementById(game.id), {
                    league: game.league,
                    variant: 'compact'
                });
                sb.update(game);
                scoreboards[game.id] = sb;
            });
        }

        // Variant tab switching
        document.querySelectorAll('.variant-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.variant-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentVariant = tab.dataset.variant;
                initScoreboards();
            });
        });

        // Animate button
        document.getElementById('btn-animate').addEventListener('click', () => {
            // Trigger score animation on NFL live game
            const nfl = scoreboards.nflLive;
            if (nfl) {
                const data = nfl.getData();
                if (data) {
                    nfl.setScore('home', parseInt(data.home.score) + 7);
                }
            }
        });

        // Toggle live state
        document.getElementById('btn-toggle-live').addEventListener('click', () => {
            const nfl = scoreboards.nflLive;
            if (nfl) {
                const data = nfl.getData();
                if (data) {
                    data.state = data.state === 'in' ? 'post' : 'in';
                    nfl.update(data);
                }
            }
        });

        // Random scores
        document.getElementById('btn-random-scores').addEventListener('click', () => {
            Object.values(scoreboards).forEach(sb => {
                const data = sb.getData();
                if (data && data.state === 'in') {
                    const addAway = Math.random() > 0.5 ? Math.floor(Math.random() * 8) : 0;
                    const addHome = Math.random() > 0.5 ? Math.floor(Math.random() * 8) : 0;
                    if (addAway) sb.setScore('away', (parseInt(data.away.score) || 0) + addAway);
                    if (addHome) sb.setScore('home', (parseInt(data.home.score) || 0) + addHome);
                }
            });
        });

        // Initialize on load
        initScoreboards();
    </script>
</body>
</html>
