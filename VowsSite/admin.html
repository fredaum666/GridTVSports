<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Unlock Vows</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .admin-container {
            max-width: 900px;
            margin: 50px auto;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .admin-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .admin-header h1 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .form-group input:focus {
            outline: none;
            border-color: #d4a574;
        }

        .btn-unlock {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #d4a574 0%, #b8935e 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn-unlock:hover {
            transform: translateY(-2px);
        }

        .btn-lock {
            width: 100%;
            padding: 14px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .status {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .status.locked {
            background: #ffe6e6;
            color: #c0392b;
        }

        .status.unlocked {
            background: #e8f8f5;
            color: #27ae60;
        }

        .error {
            color: #e74c3c;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
        }

        .success {
            color: #27ae60;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
        }

        .info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }

        .editor-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #f0f0f0;
        }

        .editor-section h2 {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
        }

        .vows-editor {
            margin-bottom: 30px;
        }

        .vows-editor label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 16px;
        }

        .vows-editor input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            margin-bottom: 10px;
            font-family: 'Georgia', serif;
        }

        .vows-editor textarea {
            display: none;
        }

        .rich-editor {
            width: 100%;
            min-height: 250px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 0 0 8px 8px;
            border-top: none;
            font-size: 16px;
            box-sizing: border-box;
            font-family: 'Georgia', serif;
            line-height: 1.8;
            overflow-y: auto;
            background: white;
        }

        .rich-editor:focus {
            outline: none;
            border-color: #d4a574;
        }

        .rich-editor:empty:before {
            content: attr(data-placeholder);
            color: #999;
            font-style: italic;
        }

        .rich-editor p {
            margin: 0 0 15px 0;
        }

        .rich-editor p:last-child {
            margin-bottom: 0;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            padding: 10px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            margin-top: 10px;
            transition: border-color 0.2s;
        }

        .editor-wrapper:focus-within .toolbar {
            border-color: #d4a574;
        }

        .editor-wrapper:focus-within .rich-editor {
            border-color: #d4a574;
        }

        .toolbar button {
            padding: 8px 12px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .toolbar button:hover {
            background: #e9ecef;
            border-color: #d4a574;
        }

        .toolbar button.active {
            background: #d4a574;
            color: white;
            border-color: #d4a574;
        }

        .toolbar select,
        .toolbar input[type="color"] {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            background: white;
        }

        .toolbar input[type="color"] {
            width: 40px;
            height: 34px;
            padding: 2px;
        }

        .toolbar .separator {
            width: 1px;
            background: #ddd;
            margin: 0 5px;
        }

        .vows-editor input:focus {
            outline: none;
            border-color: #d4a574;
        }

        .btn-save {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 10px;
        }

        .btn-save:hover {
            transform: translateY(-2px);
        }

        .formatting-help {
            background: #fff9e6;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            color: #666;
            margin-bottom: 15px;
        }

        .formatting-help strong {
            color: #d4a574;
        }

        @media (max-width: 600px) {
            .toolbar {
                gap: 3px;
                padding: 8px;
            }

            .toolbar button {
                padding: 6px 8px;
                font-size: 12px;
            }

            .toolbar select {
                font-size: 12px;
            }
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }

        .tab.active {
            color: #d4a574;
            border-bottom-color: #d4a574;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .admin-container {
                max-width: 100%;
                padding: 20px;
            }

            .tabs {
                flex-direction: column;
                gap: 5px;
            }

            .tab {
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1>üîê Admin Control Panel</h1>
            <p>Manage vows visibility and content</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('unlock')">üîì Unlock Control</button>
            <button class="tab" onclick="switchTab('editor')">‚úçÔ∏è Edit Vows</button>
        </div>

        <!-- Unlock Tab -->
        <div id="unlock-tab" class="tab-content active">
            <div id="status-display" class="status locked">
                üîí Vows are currently LOCKED
            </div>

            <div id="login-form">
                <div class="form-group">
                    <label for="password">Admin Password</label>
                    <input type="password" id="password" placeholder="Enter password">
                </div>
                <button class="btn-unlock" onclick="unlockVows()">üîì Unlock Vows</button>
                <div id="message"></div>
            </div>

            <div id="admin-controls" style="display: none;">
                <button class="btn-lock" onclick="lockVows()">üîí Lock Vows Again</button>
            </div>

            <div class="info">
                <strong>Instructions:</strong><br>
                - Default password: <code>wedding2024</code><br>
                - Change password in script.js<br>
                - Unlock when ceremony begins<br>
                - Guests will see vows immediately
            </div>
        </div>

        <!-- Editor Tab -->
        <div id="editor-tab" class="tab-content">
            <div class="editor-section">
                <h2>Edit Wedding Vows</h2>

                <div class="formatting-help">
                    <strong>Formatting Tips:</strong> Use the toolbar buttons to format your text. Select text and click the formatting buttons to apply styles.
                </div>

                <div class="vows-editor">
                    <label for="groom-name">Groom's Name</label>
                    <input type="text" id="groom-name" placeholder="Enter groom's name">

                    <label for="groom-vows">Groom's Vows</label>
                    <div class="editor-wrapper">
                        <div class="toolbar" id="groom-toolbar">
                            <button type="button" onclick="formatText('groom-vows-editor', 'bold')" title="Bold"><b>B</b></button>
                            <button type="button" onclick="formatText('groom-vows-editor', 'italic')" title="Italic"><i>I</i></button>
                            <button type="button" onclick="formatText('groom-vows-editor', 'underline')" title="Underline"><u>U</u></button>

                            <div class="separator"></div>

                            <select onchange="changeFontSize('groom-vows-editor', this.value)" title="Font Size">
                                <option value="">Size</option>
                                <option value="1">Small</option>
                                <option value="3">Normal</option>
                                <option value="5">Large</option>
                                <option value="7">Extra Large</option>
                            </select>

                            <input type="color" onchange="changeTextColor('groom-vows-editor', this.value)" title="Text Color" value="#000000">

                            <div class="separator"></div>

                            <button type="button" onclick="formatText('groom-vows-editor', 'justifyLeft')" title="Align Left">‚¨Ö</button>
                            <button type="button" onclick="formatText('groom-vows-editor', 'justifyCenter')" title="Align Center">‚Üî</button>
                            <button type="button" onclick="formatText('groom-vows-editor', 'justifyRight')" title="Align Right">‚û°</button>
                        </div>
                        <div id="groom-vows-editor" class="rich-editor" contenteditable="true" data-placeholder="Start writing the groom's vows here..."></div>
                    </div>
                </div>

                <div class="vows-editor">
                    <label for="bride-name">Bride's Name</label>
                    <input type="text" id="bride-name" placeholder="Enter bride's name">

                    <label for="bride-vows">Bride's Vows</label>
                    <div class="editor-wrapper">
                        <div class="toolbar" id="bride-toolbar">
                            <button type="button" onclick="formatText('bride-vows-editor', 'bold')" title="Bold"><b>B</b></button>
                            <button type="button" onclick="formatText('bride-vows-editor', 'italic')" title="Italic"><i>I</i></button>
                            <button type="button" onclick="formatText('bride-vows-editor', 'underline')" title="Underline"><u>U</u></button>

                            <div class="separator"></div>

                            <select onchange="changeFontSize('bride-vows-editor', this.value)" title="Font Size">
                                <option value="">Size</option>
                                <option value="1">Small</option>
                                <option value="3">Normal</option>
                                <option value="5">Large</option>
                                <option value="7">Extra Large</option>
                            </select>

                            <input type="color" onchange="changeTextColor('bride-vows-editor', this.value)" title="Text Color" value="#000000">

                            <div class="separator"></div>

                            <button type="button" onclick="formatText('bride-vows-editor', 'justifyLeft')" title="Align Left">‚¨Ö</button>
                            <button type="button" onclick="formatText('bride-vows-editor', 'justifyCenter')" title="Align Center">‚Üî</button>
                            <button type="button" onclick="formatText('bride-vows-editor', 'justifyRight')" title="Align Right">‚û°</button>
                        </div>
                        <div id="bride-vows-editor" class="rich-editor" contenteditable="true" data-placeholder="Start writing the bride's vows here..."></div>
                    </div>
                </div>

                <button class="btn-save" onclick="saveVows()">üíæ Save Vows</button>
                <div id="save-message"></div>

                <div class="info" style="margin-top: 20px;">
                    <strong>Note:</strong> Your vows are saved in your browser's storage. Make sure to save your changes before the ceremony!
                </div>
            </div>
        </div>
    </div>

    <script>
        // CHANGE THIS PASSWORD to your own secure password
        const ADMIN_PASSWORD = 'wedding2024';

        function checkStatus() {
            const isUnlocked = localStorage.getItem('vowsUnlocked') === 'true';
            const statusDisplay = document.getElementById('status-display');
            const loginForm = document.getElementById('login-form');
            const adminControls = document.getElementById('admin-controls');

            if (isUnlocked) {
                statusDisplay.className = 'status unlocked';
                statusDisplay.textContent = 'üîì Vows are currently UNLOCKED';
                loginForm.style.display = 'none';
                adminControls.style.display = 'block';
            } else {
                statusDisplay.className = 'status locked';
                statusDisplay.textContent = 'üîí Vows are currently LOCKED';
                loginForm.style.display = 'block';
                adminControls.style.display = 'none';
            }
        }

        function unlockVows() {
            const password = document.getElementById('password').value;
            const messageDiv = document.getElementById('message');

            if (password === ADMIN_PASSWORD) {
                localStorage.setItem('vowsUnlocked', 'true');
                messageDiv.className = 'success';
                messageDiv.textContent = '‚úì Vows unlocked successfully!';
                document.getElementById('password').value = '';
                setTimeout(() => {
                    messageDiv.textContent = '';
                    checkStatus();
                }, 1500);
            } else {
                messageDiv.className = 'error';
                messageDiv.textContent = '‚úó Incorrect password';
                setTimeout(() => {
                    messageDiv.textContent = '';
                }, 3000);
            }
        }

        function lockVows() {
            if (confirm('Are you sure you want to lock the vows again?')) {
                localStorage.removeItem('vowsUnlocked');
                checkStatus();
            }
        }

        // Allow Enter key to submit
        document.getElementById('password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                unlockVows();
            }
        });

        // Check status on load
        checkStatus();

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            if (tabName === 'unlock') {
                document.getElementById('unlock-tab').classList.add('active');
                document.querySelector('.tab:nth-child(1)').classList.add('active');
            } else if (tabName === 'editor') {
                document.getElementById('editor-tab').classList.add('active');
                document.querySelector('.tab:nth-child(2)').classList.add('active');
                loadVows();
            }
        }

        // Rich text editor functions
        function formatText(editorId, command) {
            const editor = document.getElementById(editorId);
            editor.focus();
            document.execCommand(command, false, null);
        }

        function changeFontSize(editorId, size) {
            if (size) {
                const editor = document.getElementById(editorId);
                editor.focus();
                document.execCommand('fontSize', false, size);
            }
        }

        function changeTextColor(editorId, color) {
            const editor = document.getElementById(editorId);
            editor.focus();
            document.execCommand('foreColor', false, color);
        }

        // Save vows to localStorage
        function saveVows() {
            const groomName = document.getElementById('groom-name').value.trim();
            const groomVows = document.getElementById('groom-vows-editor').innerHTML.trim();
            const brideName = document.getElementById('bride-name').value.trim();
            const brideVows = document.getElementById('bride-vows-editor').innerHTML.trim();

            if (!groomName || !groomVows || groomVows === '<br>' || !brideName || !brideVows || brideVows === '<br>') {
                showSaveMessage('Please fill in all fields', 'error');
                return;
            }

            const vowsData = {
                groomName: groomName,
                groomVows: groomVows,
                brideName: brideName,
                brideVows: brideVows
            };

            localStorage.setItem('weddingVows', JSON.stringify(vowsData));
            showSaveMessage('Vows saved successfully!', 'success');
        }

        // Load vows from localStorage
        function loadVows() {
            const saved = localStorage.getItem('weddingVows');
            if (saved) {
                const vowsData = JSON.parse(saved);
                document.getElementById('groom-name').value = vowsData.groomName || '';
                document.getElementById('groom-vows-editor').innerHTML = vowsData.groomVows || '';
                document.getElementById('bride-name').value = vowsData.brideName || '';
                document.getElementById('bride-vows-editor').innerHTML = vowsData.brideVows || '';
            }
        }

        // Show save message
        function showSaveMessage(message, type) {
            const messageDiv = document.getElementById('save-message');
            messageDiv.className = type;
            messageDiv.textContent = message;
            setTimeout(() => {
                messageDiv.textContent = '';
            }, 3000);
        }

        // Load vows on page load
        loadVows();
    </script>
</body>
</html>
